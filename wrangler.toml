name = "voipms-groudwire-cloudflare-worker"
main = "src/index.ts"
compatibility_date = "2024-11-21"

[vars]
# Currency that will be shown in Groundwire balance display
CURRENCY = 'CAD'

# Worker base URL (optional - auto-detected from request host if not set)
# WORKER_BASE_URL = 'https://your-worker.your-subdomain.workers.dev'

# =============================================================================
# RATE LIMITING
# =============================================================================
# Rate limiting (per IP)
RATE_LIMIT_REQUESTS = '10'        # Max requests per window
RATE_LIMIT_WINDOW_SECONDS = '60'  # Window duration in seconds

# =============================================================================
# DEBUG
# =============================================================================
# Enable debug logging (optional - set to 'true' for troubleshooting)
DEBUG = 'true'

[observability.logs]
enabled = true

[placement]
mode = "smart"

# =============================================================================
# REQUIRED SECRETS
# =============================================================================
# You MUST set these secrets before deploying:
#
#   wrangler secret put VOIP_MS_USERNAME
#   wrangler secret put VOIP_MS_PASSWORD
#   wrangler secret put AUTH_TOKEN
#
# VOIP_MS_USERNAME: Your VoIP.ms API username (email address)
# VOIP_MS_PASSWORD: Your VoIP.ms API password (from VoIP.ms portal)
# AUTH_TOKEN: A random token for Groundwire to authenticate with this worker
#             Generate one with: openssl rand -base64 32

# =============================================================================
# KV NAMESPACES (Optional)
# =============================================================================
# To enable rate limiting, create a KV namespace:
#   wrangler kv namespace create SECURITY_KV
# Then uncomment and fill in the ID below:
#
# [[kv_namespaces]]
# binding = "SECURITY_KV"
# id = "your-security-kv-namespace-id"

# To enable balance caching (reduces API calls), create a KV namespace:
#   wrangler kv namespace create BALANCE_CACHE
# Then uncomment and fill in the ID below:
#
# [[kv_namespaces]]
# binding = "BALANCE_CACHE"
# id = "your-balance-cache-namespace-id"
